<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>relativePosition - Parallax</title>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="relativePosition.js"></script>
	<script>
		$(document).ready(function(){
			
			var Boxes = $('.box');
			var Box1 = $('#box1');
			var Box2 = $('#box2');
			var Box3 = $('#box3');
			
			var Sphere11 = Box1.find('.sphere1');
			var Sphere12 = Box1.find('.sphere2');
			var Sphere13 = Box1.find('.sphere3');
			
			var Sphere21 = Box2.find('.sphere1');
			var Sphere22 = Box2.find('.sphere2');
			var Sphere23 = Box2.find('.sphere3');
			
			var Sphere31 = Box3.find('.sphere1');
			var Sphere32 = Box3.find('.sphere2');
			var Sphere33 = Box3.find('.sphere3');
			
			$(window).on( 'scroll resize', function(){
				
				var windowOffset = $(window).fullOffset();
				
				Boxes.height( windowOffset.height );
				var position1 = Box1.relativePosition( windowOffset );
				var position2 = Box2.relativePosition( windowOffset );
				var position3 = Box3.relativePosition( windowOffset );
				
				Sphere11.css( 'top', position1.top * 50 + 50 + '%' );
				Sphere21.css( 'top', position2.top * 25 + 50 + '%' );
				Sphere31.css( 'top', position3.top * 10 + 50 + '%' );
				
				Sphere12.css({ bottom: position1.top * 50 + 50 + '%', transform:'scale('+(position1.top*-1+1)+')' });
				Sphere22.css({ bottom: position2.top * 50 + 50 + '%', transform:'scale('+(position2.top+1)+')' });
				Sphere32.css({ bottom: position3.top * 50 + 50 + '%', transform:'scale('+(position3.top*-1+1)+')' });
				
				Sphere13.css( 'left', position1.top * -50 + 50 + '%' );
				Sphere23.css( 'left', position2.top * -50 + 50 + '%' );
				Sphere33.css( 'left', position3.top * -50 + 50 + '%' );
				
			}).trigger( 'scroll' );
			
		});
	</script>
    <style>
		body {
			font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
			font-size: 14px;
			line-height: 1.5;
			color: #333;
			background: #FFF;
			margin:  0;
		}
		.wrapper {
			overflow: hidden;
			width: 960px;
			margin: 0 auto;
		}
		
		.box {
			width:       100%;
			height:      800px;
			line-height: 800px;
			color:      white;
			text-align: center;
			position: relative;
			overflow: hidden;
		}
		#box1 { background: #096; }
		#box2 { background: #900; }
		#box3 { background: #F90; }
		
		.sphere {
			position: absolute;
			width: 50px;
			height: 50px;
			line-height: 50px;
			border-radius: 100%;
			color: #333;
			background: white;
		}
		#sphere21 {
			background: red;
			z-index: 2;
		}
		
		.sphere1 {
			left: 30%;
		}
		.sphere2 {
			left: 50%;
		}
		.sphere3 {
			left: 70%;
		}
	</style>
</head>
<body>

<div class="box" id="box1">
	<strong class="sphere sphere1">1</strong>
	<strong class="sphere sphere2">2</strong>
	<strong class="sphere sphere3">3</strong>
</div>
<div class="box" id="box2">
	<strong class="sphere sphere1">1</strong>
	<strong class="sphere sphere2">2</strong>
	<strong class="sphere sphere3">3</strong>
</div>
<div class="box" id="box3">
	<strong class="sphere sphere1">1</strong>
	<strong class="sphere sphere2">2</strong>
	<strong class="sphere sphere3">3</strong>
</div>

</body>
</html>